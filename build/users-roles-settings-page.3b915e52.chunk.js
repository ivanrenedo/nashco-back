(self.webpackChunknahsco_back=self.webpackChunknahsco_back||[]).push([[8853],{16098:(B,S,s)=>{"use strict";s.r(S),s.d(S,{default:()=>wn});var t=s(67294),c=s(49656),a=s(68547),m=s(31498),f=s(81912),O=s(29728),A=s(17034),L=s(67838),d=s(36989),P=s(49066),C=s(185),j=s(38939),u=s(8060),h=s(79031),y=s(37909),D=s(63237),M=s(72735),Z=s(14087),V=s(96315),$=s(97132),k=s(23724),te=s(63852),_=s(89031),i=(n,e,r)=>new Promise((p,E)=>{var g=o=>{try{l(r.next(o))}catch(v){E(v)}},b=o=>{try{l(r.throw(o))}catch(v){E(v)}},l=o=>o.done?p(o.value):Promise.resolve(o.value).then(g,b);l((r=r.apply(n,e)).next())});const R=(n,e)=>i(void 0,null,function*(){try{const{data:r}=yield _.be.get((0,_.Gc)("roles"));return e("The roles have loaded successfully"),r}catch(r){throw n({type:"warning",message:{id:"notification.error"}}),new Error("error")}}),T=(n,e)=>i(void 0,null,function*(){try{yield _.be.delete(`${(0,_.Gc)("roles")}/${n}`)}catch(r){e({type:"warning",message:{id:"notification.error",defaultMessage:"An error occured"}})}});var x=s(45697),U=s.n(x),F=s(12028),G=s(46273),ae=s(15234),re=s(4585),oe=s(20022),ne=Object.defineProperty,W=Object.getOwnPropertySymbols,de=Object.prototype.hasOwnProperty,q=Object.prototype.propertyIsEnumerable,fe=(n,e,r)=>e in n?ne(n,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):n[e]=r,ee=(n,e)=>{for(var r in e||(e={}))de.call(e,r)&&fe(n,r,e[r]);if(W)for(var r of W(e))q.call(e,r)&&fe(n,r,e[r]);return n};const ue=({sortedRoles:n,canDelete:e,permissions:r,setRoleToDelete:p,onDelete:E})=>{const{formatMessage:g}=(0,$.useIntl)(),{push:b}=(0,c.useHistory)(),[l,o]=E,v=w=>e&&!["public","authenticated"].includes(w.type),I=w=>{p(w),o(!l)},N=w=>{b(`/settings/${m.Z}/roles/${w}`)};return t.createElement(ae.p,null,n==null?void 0:n.map(w=>t.createElement(h.Tr,ee({key:w.name},(0,a.onRowClick)({fn:()=>N(w.id)})),t.createElement(y.Td,{width:"20%"},t.createElement(M.Z,null,w.name)),t.createElement(y.Td,{width:"50%"},t.createElement(M.Z,null,w.description)),t.createElement(y.Td,{width:"30%"},t.createElement(M.Z,null,`${w.nb_users} ${g({id:"global.users",defaultMessage:"users"}).toLowerCase()}`)),t.createElement(y.Td,null,t.createElement(G.k,ee({justifyContent:"end"},a.stopPropagation),t.createElement(a.CheckPermissions,{permissions:r.updateRole},t.createElement(F.h,{onClick:()=>N(w.id),noBorder:!0,icon:t.createElement(re.Z,null),label:g({id:"app.component.table.edit",defaultMessage:"Edit {target}"},{target:`${w.name}`})})),v(w)&&t.createElement(a.CheckPermissions,{permissions:r.deleteRole},t.createElement(F.h,{onClick:()=>I(w.id),noBorder:!0,icon:t.createElement(oe.default,null),label:g({id:"global.delete-target",defaultMessage:"Delete {target}"},{target:`${w.name}`})})))))))},ve=ue;ue.defaultProps={canDelete:!1},ue.propTypes={onDelete:U().array.isRequired,permissions:U().object.isRequired,setRoleToDelete:U().func.isRequired,sortedRoles:U().array.isRequired,canDelete:U().bool};var Ee=(n,e,r)=>new Promise((p,E)=>{var g=o=>{try{l(r.next(o))}catch(v){E(v)}},b=o=>{try{l(r.throw(o))}catch(v){E(v)}},l=o=>o.done?p(o.value):Promise.resolve(o.value).then(g,b);l((r=r.apply(n,e)).next())});const Pe=()=>{const{trackUsage:n}=(0,a.useTracking)(),{formatMessage:e}=(0,$.useIntl)(),{push:r}=(0,c.useHistory)(),p=(0,a.useNotification)(),{notifyStatus:E}=(0,Z.G)(),[{query:g}]=(0,a.useQueryParams)(),b=(g==null?void 0:g._q)||"",[l,o]=(0,t.useState)(!1),[v,I]=(0,t.useState)(!1),[N,w]=(0,t.useState)();(0,a.useFocusWhenNavigate)();const z=(0,k.useQueryClient)(),K=(0,t.useMemo)(()=>({create:f.Z.createRole,read:f.Z.readRoles,update:f.Z.updateRole,delete:f.Z.deleteRole}),[]),{isLoading:X,allowedActions:{canRead:Y,canDelete:ce}}=(0,a.useRBAC)(K),{isLoading:Sn,data:{roles:Le},isFetching:jn}=(0,k.useQuery)("get-roles",()=>R(p,E),{initialData:{},enabled:Y}),Et=Sn||jn,Un=()=>{n("willCreateRole"),r(`/settings/${m.Z}/roles/new`)},Bn=()=>{o(!l)},In={roles:{id:(0,_.OB)("Roles.empty"),defaultMessage:"You don't have any roles yet."},search:{id:(0,_.OB)("Roles.empty.search"),defaultMessage:"No roles match the search."}},_n=e({id:"global.roles",defaultMessage:"Roles"}),Zn=(0,k.useMutation)(Gn=>T(Gn,p),{onSuccess(){return Ee(this,null,function*(){yield z.invalidateQueries("get-roles")})}}),$n=()=>Ee(void 0,null,function*(){I(!0),yield Zn.mutateAsync(N),o(!l),I(!1)}),ge=(0,te.ZP)(Le||[],b,{keys:["name","description"]}),Nn=b&&!ge.length?"search":"roles",Fn=4,Kn=((Le==null?void 0:Le.length)||0)+1;return t.createElement(A.A,null,t.createElement(a.SettingsPageTitle,{name:_n}),t.createElement(C.o,{"aria-busy":Et},t.createElement(L.T,{title:e({id:"global.roles",defaultMessage:"Roles"}),subtitle:e({id:"Settings.roles.list.description",defaultMessage:"List of roles"}),primaryAction:t.createElement(a.CheckPermissions,{permissions:f.Z.createRole},t.createElement(O.z,{onClick:Un,startIcon:t.createElement(V.default,null),size:"S"},e({id:(0,_.OB)("List.button.roles"),defaultMessage:"Add new role"})))}),t.createElement(d.Z,{startActions:t.createElement(a.SearchURLQuery,{label:e({id:"app.component.search.label",defaultMessage:"Search"})})}),t.createElement(P.D,null,!Y&&t.createElement(a.NoPermissions,null),(Et||X)&&t.createElement(a.LoadingIndicatorPage,null),Y&&ge&&(ge==null?void 0:ge.length)?t.createElement(j.i,{colCount:Fn,rowCount:Kn},t.createElement(u.h,null,t.createElement(h.Tr,null,t.createElement(y.Th,null,t.createElement(M.Z,{variant:"sigma",textColor:"neutral600"},e({id:"global.name",defaultMessage:"Name"}))),t.createElement(y.Th,null,t.createElement(M.Z,{variant:"sigma",textColor:"neutral600"},e({id:"global.description",defaultMessage:"Description"}))),t.createElement(y.Th,null,t.createElement(M.Z,{variant:"sigma",textColor:"neutral600"},e({id:"global.users",defaultMessage:"Users"}))),t.createElement(y.Th,null,t.createElement(D.T,null,e({id:"global.actions",defaultMessage:"Actions"}))))),t.createElement(ve,{sortedRoles:ge,canDelete:ce,permissions:f.Z,setRoleToDelete:w,onDelete:[l,o]})):t.createElement(a.EmptyStateLayout,{content:In[Nn]})),t.createElement(a.ConfirmDialog,{isConfirmButtonLoading:v,onConfirm:$n,onToggleDialog:Bn,isOpen:l})))},De=()=>t.createElement(a.CheckPagePermissions,{permissions:f.Z.accessRoles},t.createElement(Pe,null));var ye=s(80831),H=s(7681),Q=s(35961),he=s(16364),me=s(64256),Oe=s(67109),we=s(85018),be=s(11276),se=s(74571),ie=s(84757),J=s(96486);const Se=(0,t.createContext)({}),je=({children:n,value:e})=>t.createElement(Se.Provider,{value:e},n),Te=()=>(0,t.useContext)(Se);je.propTypes={children:U().node.isRequired,value:U().object.isRequired};var Re=s(71893),Pt=s(35161),yt=s.n(Pt),ht=s(13217),Ot=s.n(ht);const bt=n=>{switch(n){case"POST":return{text:"success600",border:"success200",background:"success100"};case"GET":return{text:"secondary600",border:"secondary200",background:"secondary100"};case"PUT":return{text:"warning600",border:"warning200",background:"warning100"};case"DELETE":return{text:"danger600",border:"danger200",background:"danger100"};default:return{text:"neutral600",border:"neutral200",background:"neutral100"}}},Rt=(0,Re.default)(Q.x)`
  margin: -1px;
  border-radius: ${({theme:n})=>n.spaces[1]} 0 0 ${({theme:n})=>n.spaces[1]};
`;function xe({route:n}){const{formatMessage:e}=(0,$.useIntl)(),{method:r,handler:p,path:E}=n,g=E?Ot()(E.split("/")):[],[b="",l=""]=p?p.split("."):[],o=bt(n.method);return t.createElement(H.K,{spacing:2},t.createElement(M.Z,{variant:"delta",as:"h3"},e({id:"users-permissions.BoundRoute.title",defaultMessage:"Bound route to"}),"\xA0",t.createElement("span",null,b),t.createElement(M.Z,{variant:"delta",textColor:"primary600"},".",l)),t.createElement(H.K,{horizontal:!0,hasRadius:!0,background:"neutral0",borderColor:"neutral200",spacing:0},t.createElement(Rt,{background:o.background,borderColor:o.border,padding:2},t.createElement(M.Z,{fontWeight:"bold",textColor:o.text},r)),t.createElement(Q.x,{paddingLeft:2,paddingRight:2},yt()(g,v=>t.createElement(M.Z,{key:v,textColor:v.includes(":")?"neutral600":"neutral900"},"/",v)))))}xe.defaultProps={route:{handler:"Nocontroller.error",method:"GET",path:"/there-is-no-path"}},xe.propTypes={route:U().shape({handler:U().string,method:U().string,path:U().string})};const Ct=xe,At=()=>{const{formatMessage:n}=(0,$.useIntl)(),{selectedAction:e,routes:r}=Te(),p=(0,J.without)(e.split("."),"controllers"),E=(0,J.get)(r,p[0]),g=p.slice(1).join("."),b=(0,J.isEmpty)(E)?[]:E.filter(l=>l.handler.endsWith(g));return t.createElement(se.P,{col:5,background:"neutral150",paddingTop:6,paddingBottom:6,paddingLeft:7,paddingRight:7,style:{minHeight:"100%"}},e?t.createElement(H.K,{spacing:2},b.map((l,o)=>t.createElement(Ct,{key:o,route:l}))):t.createElement(H.K,{spacing:2},t.createElement(M.Z,{variant:"delta",as:"h3"},n({id:"users-permissions.Policies.header.title",defaultMessage:"Advanced settings"})),t.createElement(M.Z,{as:"p",textColor:"neutral600"},n({id:"users-permissions.Policies.header.hint",defaultMessage:"Select the application's actions or the plugin's actions and click on the cog icon to display the bound route"}))))};var Dt=s(48734),Tt=s(74756),xt=s(63081),Lt=s(11700),Mt=s.n(Lt);function wt(n){switch(n){case"application":return"Application";case"plugin::content-manager":return"Content manager";case"plugin::content-type-builder":return"Content types builder";case"plugin::documentation":return"Documentation";case"plugin::email":return"Email";case"plugin::i18n":return"i18n";case"plugin::upload":return"Upload";case"plugin::users-permissions":return"Users-permissions";default:return Mt()(n.replace("api::","").replace("plugin::",""))}}const St=wt;var jt=s(89734),Ue=s.n(jt),Be=s(36213),Ut=s(78114);const Ie=Re.css`
  background: ${n=>n.theme.colors.primary100};
  svg {
    opacity: 1;
  }
`,Bt=(0,Re.default)(Q.x)`
  display: flex;
  justify-content: space-between;
  align-items: center;

  svg {
    opacity: 0;
    path {
      fill: ${n=>n.theme.colors.primary600};
    }
  }

  /* Show active style both on hover and when the action is selected */
  ${n=>n.isActive&&Ie}
  &:hover {
    ${Ie}
  }
`,It=Re.default.div`
  flex: 1;
  align-self: center;
  border-top: 1px solid ${({theme:n})=>n.colors.neutral150};
`,_e=({subCategory:n})=>{const{formatMessage:e}=(0,$.useIntl)(),{onChange:r,onChangeSelectAll:p,onSelectedAction:E,selectedAction:g,modifiedData:b}=Te(),l=(0,t.useMemo)(()=>(0,J.get)(b,n.name,{}),[b,n]),o=(0,t.useMemo)(()=>Object.values(l).every(w=>w.enabled===!0),[l]),v=(0,t.useMemo)(()=>Object.values(l).some(w=>w.enabled===!0)&&!o,[l,o]),I=(0,t.useCallback)(({target:{name:w}})=>{p({target:{name:w,value:!o}})},[o,p]),N=(0,t.useCallback)(w=>g===w,[g]);return t.createElement(Q.x,null,t.createElement(G.k,{justifyContent:"space-between",alignItems:"center"},t.createElement(Q.x,{paddingRight:4},t.createElement(M.Z,{variant:"sigma",textColor:"neutral600"},n.label)),t.createElement(It,null),t.createElement(Q.x,{paddingLeft:4},t.createElement(Be.X,{name:n.name,value:o,onValueChange:w=>I({target:{name:n.name,value:w}}),indeterminate:v},e({id:"app.utils.select-all",defaultMessage:"Select all"})))),t.createElement(G.k,{paddingTop:6,paddingBottom:6},t.createElement(be.r,{gap:2,style:{flex:1}},n.actions.map(w=>{const z=`${w.name}.enabled`;return t.createElement(se.P,{col:6,key:w.name},t.createElement(Bt,{isActive:N(w.name),padding:2,hasRadius:!0},t.createElement(Be.X,{value:(0,J.get)(b,z,!1),name:z,onValueChange:K=>r({target:{name:z,value:K}})},w.label),t.createElement("button",{type:"button","data-testid":"action-cog",onClick:()=>E(w.name),style:{display:"inline-flex",alignItems:"center"}},t.createElement(Ut.Z,null))))}))))};_e.propTypes={subCategory:U().object.isRequired};const _t=_e;var Zt=Object.defineProperty,$t=Object.defineProperties,Nt=Object.getOwnPropertyDescriptors,Ze=Object.getOwnPropertySymbols,Ft=Object.prototype.hasOwnProperty,Kt=Object.prototype.propertyIsEnumerable,$e=(n,e,r)=>e in n?Zt(n,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):n[e]=r,Gt=(n,e)=>{for(var r in e||(e={}))Ft.call(e,r)&&$e(n,r,e[r]);if(Ze)for(var r of Ze(e))Kt.call(e,r)&&$e(n,r,e[r]);return n},Wt=(n,e)=>$t(n,Nt(e));const Ne=({name:n,permissions:e})=>{const r=(0,t.useMemo)(()=>Ue()(Object.values(e.controllers).reduce((p,E,g)=>{const b=`${n}.controllers.${Object.keys(e.controllers)[g]}`,l=Ue()(Object.keys(E).reduce((o,v)=>[...o,Wt(Gt({},E[v]),{label:v,name:`${b}.${v}`})],[]),"label");return[...p,{actions:l,label:Object.keys(e.controllers)[g],name:b}]},[]),"label"),[n,e]);return t.createElement(Q.x,{padding:6},r.map(p=>t.createElement(_t,{key:p.name,subCategory:p})))};Ne.propTypes={name:U().string.isRequired,permissions:U().object.isRequired};const zt=Ne;var Vt=Object.defineProperty,kt=Object.defineProperties,Ht=Object.getOwnPropertyDescriptors,Fe=Object.getOwnPropertySymbols,Qt=Object.prototype.hasOwnProperty,Xt=Object.prototype.propertyIsEnumerable,Ke=(n,e,r)=>e in n?Vt(n,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):n[e]=r,Yt=(n,e)=>{for(var r in e||(e={}))Qt.call(e,r)&&Ke(n,r,e[r]);if(Fe)for(var r of Fe(e))Xt.call(e,r)&&Ke(n,r,e[r]);return n},Jt=(n,e)=>kt(n,Ht(e));const qt=(n,e)=>{const r=Object.keys(e).sort().map(p=>({name:p,isOpen:!1}));return Jt(Yt({},n),{collapses:r})};var Ce=s(60612),er=Object.defineProperty,tr=Object.defineProperties,rr=Object.getOwnPropertyDescriptors,Ge=Object.getOwnPropertySymbols,nr=Object.prototype.hasOwnProperty,sr=Object.prototype.propertyIsEnumerable,We=(n,e,r)=>e in n?er(n,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):n[e]=r,ze=(n,e)=>{for(var r in e||(e={}))nr.call(e,r)&&We(n,r,e[r]);if(Ge)for(var r of Ge(e))sr.call(e,r)&&We(n,r,e[r]);return n},Ve=(n,e)=>tr(n,rr(e));const ar={collapses:[]},or=(n,e)=>(0,Ce.default)(n,r=>{switch(e.type){case"TOGGLE_COLLAPSE":{r.collapses=n.collapses.map((p,E)=>E===e.index?Ve(ze({},p),{isOpen:!p.isOpen}):Ve(ze({},p),{isOpen:!1}));break}default:return r}}),ir=()=>{const{modifiedData:n}=Te(),{formatMessage:e}=(0,$.useIntl)(),[{collapses:r},p]=(0,t.useReducer)(or,ar,g=>qt(g,n)),E=g=>p({type:"TOGGLE_COLLAPSE",index:g});return t.createElement(H.K,{spacing:1},r.map((g,b)=>t.createElement(Dt.U,{expanded:g.isOpen,onToggle:()=>E(b),key:g.name,variant:b%2===0?"secondary":void 0},t.createElement(Tt.B,{title:St(g.name),description:e({id:"users-permissions.Plugin.permissions.plugins.description",defaultMessage:"Define all allowed actions for the {name} plugin."},{name:g.name}),variant:b%2?"primary":"secondary"}),t.createElement(xt.v,null,t.createElement(Q.x,null,t.createElement(zt,{permissions:n[g.name],name:g.name}))))))};var lr=Object.defineProperty,cr=Object.defineProperties,dr=Object.getOwnPropertyDescriptors,ke=Object.getOwnPropertySymbols,ur=Object.prototype.hasOwnProperty,pr=Object.prototype.propertyIsEnumerable,He=(n,e,r)=>e in n?lr(n,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):n[e]=r,mr=(n,e)=>{for(var r in e||(e={}))ur.call(e,r)&&He(n,r,e[r]);if(ke)for(var r of ke(e))pr.call(e,r)&&He(n,r,e[r]);return n},gr=(n,e)=>cr(n,dr(e));const fr={initialData:{},modifiedData:{},routes:{},selectedAction:"",policies:[]},vr=(n,e)=>(0,Ce.default)(n,r=>{switch(e.type){case"ON_CHANGE":{const p=e.keys.length,E=e.keys[p-1]==="enabled";if(e.value&&E){const g=(0,J.take)(e.keys,p-1).join(".");r.selectedAction=g}(0,J.set)(r,["modifiedData",...e.keys],e.value);break}case"ON_CHANGE_SELECT_ALL":{const p=["modifiedData",...e.keys],E=(0,J.get)(n,p,{}),g=Object.keys(E).reduce((b,l)=>(b[l]=gr(mr({},E[l]),{enabled:e.value}),b),{});(0,J.set)(r,p,g);break}case"ON_RESET":{r.modifiedData=n.initialData;break}case"ON_SUBMIT_SUCCEEDED":{r.initialData=n.modifiedData;break}case"SELECT_ACTION":{const{actionToSelect:p}=e;r.selectedAction=p===n.selectedAction?"":p;break}default:return r}});var Er=Object.defineProperty,Pr=Object.defineProperties,yr=Object.getOwnPropertyDescriptors,Qe=Object.getOwnPropertySymbols,hr=Object.prototype.hasOwnProperty,Or=Object.prototype.propertyIsEnumerable,Xe=(n,e,r)=>e in n?Er(n,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):n[e]=r,br=(n,e)=>{for(var r in e||(e={}))hr.call(e,r)&&Xe(n,r,e[r]);if(Qe)for(var r of Qe(e))Or.call(e,r)&&Xe(n,r,e[r]);return n},Rr=(n,e)=>Pr(n,yr(e));const Cr=(n,e,r)=>Rr(br({},n),{initialData:e,modifiedData:e,routes:r});var Ar=Object.defineProperty,Dr=Object.defineProperties,Tr=Object.getOwnPropertyDescriptors,Ye=Object.getOwnPropertySymbols,xr=Object.prototype.hasOwnProperty,Lr=Object.prototype.propertyIsEnumerable,Je=(n,e,r)=>e in n?Ar(n,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):n[e]=r,Mr=(n,e)=>{for(var r in e||(e={}))xr.call(e,r)&&Je(n,r,e[r]);if(Ye)for(var r of Ye(e))Lr.call(e,r)&&Je(n,r,e[r]);return n},wr=(n,e)=>Dr(n,Tr(e));const qe=(0,t.forwardRef)(({permissions:n,routes:e},r)=>{const{formatMessage:p}=(0,$.useIntl)(),[E,g]=(0,t.useReducer)(vr,fr,I=>Cr(I,n,e));(0,t.useImperativeHandle)(r,()=>({getPermissions(){return{permissions:E.modifiedData}},resetForm(){g({type:"ON_RESET"})},setFormAfterSubmit(){g({type:"ON_SUBMIT_SUCCEEDED"})}}));const b=({target:{name:I,value:N}})=>g({type:"ON_CHANGE",keys:I.split("."),value:N==="empty__string_value"?"":N}),l=({target:{name:I,value:N}})=>g({type:"ON_CHANGE_SELECT_ALL",keys:I.split("."),value:N}),o=I=>g({type:"SELECT_ACTION",actionToSelect:I}),v=wr(Mr({},E),{onChange:b,onChangeSelectAll:l,onSelectedAction:o});return t.createElement(je,{value:v},t.createElement(be.r,{gap:0,shadow:"filterShadow",hasRadius:!0,background:"neutral0"},t.createElement(se.P,{col:7,paddingTop:6,paddingBottom:6,paddingLeft:7,paddingRight:7},t.createElement(H.K,{spacing:6},t.createElement(H.K,{spacing:2},t.createElement(M.Z,{variant:"delta",as:"h2"},p({id:(0,ie.Z)("Plugins.header.title"),defaultMessage:"Permissions"})),t.createElement(M.Z,{as:"p",textColor:"neutral600"},p({id:(0,ie.Z)("Plugins.header.description"),defaultMessage:"Only actions bound by a route are listed below."}))),t.createElement(ir,null))),t.createElement(At,null)))});qe.propTypes={permissions:U().object.isRequired,routes:U().object.isRequired};const et=(0,t.memo)(qe),Yn={isLoading:!0,modifiedData:{}},Jn=(n,e)=>produce(n,r=>{switch(e.type){case"GET_DATA":{r.isLoading=!0,r.modifiedData={};break}case"GET_DATA_SUCCEEDED":{r.isLoading=!1,r.modifiedData=e.data;break}case"GET_DATA_ERROR":{r.isLoading=!0;break}case"ON_SUBMIT_SUCCEEDED":{r.modifiedData=e.data;break}default:return r}}),qn=null;var Sr=s(25108),jr=(n,e,r)=>new Promise((p,E)=>{var g=o=>{try{l(r.next(o))}catch(v){E(v)}},b=o=>{try{l(r.throw(o))}catch(v){E(v)}},l=o=>o.done?p(o.value):Promise.resolve(o.value).then(g,b);l((r=r.apply(n,e)).next())});const es=(n,e)=>{const{isLoading:r,allowedActions:p}=useRBAC(e),[{isLoading:E,modifiedData:g},b]=useReducer(reducer,initialState),l=useNotification(),o=useRef(!0),v=new AbortController,{signal:I}=v;useEffect(()=>(r||(()=>jr(void 0,null,function*(){try{b({type:"GET_DATA"});const z=yield request(getRequestURL(n),{method:"GET",signal:I});b({type:"GET_DATA_SUCCEEDED",data:z})}catch(z){o.current&&(b({type:"GET_DATA_ERROR"}),Sr.error(z),l({type:"warning",message:{id:"notification.error"}}))}}))(),()=>{v.abort(),o.current=!1}),[r,n]);const N=useCallback(w=>{b({type:"ON_SUBMIT_SUCCEEDED",data:w})},[]);return{allowedActions:p,dispatchSubmitSucceeded:N,isLoading:E,isLoadingForPermissions:r,modifiedData:g}},ts=null;var Ur=Object.defineProperty,Br=Object.defineProperties,Ir=Object.getOwnPropertyDescriptors,tt=Object.getOwnPropertySymbols,_r=Object.prototype.hasOwnProperty,Zr=Object.prototype.propertyIsEnumerable,rt=(n,e,r)=>e in n?Ur(n,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):n[e]=r,$r=(n,e)=>{for(var r in e||(e={}))_r.call(e,r)&&rt(n,r,e[r]);if(tt)for(var r of tt(e))Zr.call(e,r)&&rt(n,r,e[r]);return n},Nr=(n,e)=>Br(n,Ir(e));const rs=(n,e)=>Nr($r({},n),{isLoading:e}),ns=null,ss={roles:[],isLoading:!0},as=(n,e)=>produce(n,r=>{switch(e.type){case"GET_DATA":{r.isLoading=!0,r.roles=[];break}case"GET_DATA_SUCCEEDED":{r.roles=e.data,r.isLoading=!1;break}case"GET_DATA_ERROR":{r.isLoading=!1;break}default:return r}}),os=null;var Fr=(n,e,r)=>new Promise((p,E)=>{var g=o=>{try{l(r.next(o))}catch(v){E(v)}},b=o=>{try{l(r.throw(o))}catch(v){E(v)}},l=o=>o.done?p(o.value):Promise.resolve(o.value).then(g,b);l((r=r.apply(n,e)).next())});const is=(n=!0)=>{const[{roles:e,isLoading:r},p]=useReducer(reducer,initialState,()=>init(initialState,n)),E=useNotification(),g=useRef(!0),b=new AbortController,{signal:l}=b;useEffect(()=>(n&&o(),()=>{b.abort(),g.current=!1}),[n]);const o=()=>Fr(void 0,null,function*(){try{p({type:"GET_DATA"});const{roles:v}=yield request(`/${pluginId}/roles`,{method:"GET",signal:l});p({type:"GET_DATA_SUCCEEDED",data:v})}catch(v){const I=get(v,["response","payload","message"],"An error occured");g.current&&(p({type:"GET_DATA_ERROR"}),I!=="Forbidden"&&E({type:"warning",message:I}))}});return{roles:e,isLoading:r,getData:o}},ls=null;var Kr=Object.defineProperty,Gr=Object.defineProperties,Wr=Object.getOwnPropertyDescriptors,nt=Object.getOwnPropertySymbols,zr=Object.prototype.hasOwnProperty,Vr=Object.prototype.propertyIsEnumerable,st=(n,e,r)=>e in n?Kr(n,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):n[e]=r,kr=(n,e)=>{for(var r in e||(e={}))zr.call(e,r)&&st(n,r,e[r]);if(nt)for(var r of nt(e))Vr.call(e,r)&&st(n,r,e[r]);return n},Hr=(n,e)=>Gr(n,Wr(e));const Qr=(n,e)=>Hr(kr({},n),{isLoading:e});var Ae=s(46979);const at={permissions:{},routes:{},isLoading:!0},Xr=(n,e)=>(0,Ce.default)(n,r=>{switch(e.type){case"GET_DATA":{r.isLoading=!0,r.permissions={},r.routes={};break}case"GET_DATA_SUCCEEDED":{r.permissions=e.permissions,r.routes=e.routes,r.isLoading=!1;break}case"GET_DATA_ERROR":{r.isLoading=!1;break}default:return r}});var ot=(n,e,r)=>new Promise((p,E)=>{var g=o=>{try{l(r.next(o))}catch(v){E(v)}},b=o=>{try{l(r.throw(o))}catch(v){E(v)}},l=o=>o.done?p(o.value):Promise.resolve(o.value).then(g,b);l((r=r.apply(n,e)).next())});const it=(n=!0)=>{const e=(0,a.useNotification)(),[{permissions:r,routes:p,isLoading:E},g]=(0,t.useReducer)(Xr,at,()=>Qr(at,n)),b=(0,t.useCallback)(()=>ot(void 0,null,function*(){try{g({type:"GET_DATA"});const[{permissions:l},{routes:o}]=yield Promise.all([`/${m.Z}/permissions`,`/${m.Z}/routes`].map(v=>ot(void 0,null,function*(){return(yield Ae.Z.get(v)).data})));g({type:"GET_DATA_SUCCEEDED",permissions:(0,_.YX)(l),routes:o})}catch(l){const o=(0,J.get)(l,["response","payload","message"],"An error occured");g({type:"GET_DATA_ERROR"}),o!=="Forbidden"&&e({type:"warning",message:o})}}),[e]);return(0,t.useEffect)(()=>{n&&b()},[b,n]),{permissions:r,routes:p,getData:b,isLoading:E}},Yr={role:{},isLoading:!0},Jr=(n,e)=>(0,Ce.default)(n,r=>{switch(e.type){case"GET_DATA_SUCCEEDED":{r.role=e.role,r.isLoading=!1;break}case"GET_DATA_ERROR":{r.isLoading=!1;break}case"ON_SUBMIT_SUCCEEDED":{r.role.name=e.name,r.role.description=e.description;break}default:return r}});var qr=s(25108),en=Object.defineProperty,tn=Object.defineProperties,rn=Object.getOwnPropertyDescriptors,lt=Object.getOwnPropertySymbols,nn=Object.prototype.hasOwnProperty,sn=Object.prototype.propertyIsEnumerable,ct=(n,e,r)=>e in n?en(n,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):n[e]=r,dt=(n,e)=>{for(var r in e||(e={}))nn.call(e,r)&&ct(n,r,e[r]);if(lt)for(var r of lt(e))sn.call(e,r)&&ct(n,r,e[r]);return n},an=(n,e)=>tn(n,rn(e)),on=(n,e,r)=>new Promise((p,E)=>{var g=o=>{try{l(r.next(o))}catch(v){E(v)}},b=o=>{try{l(r.throw(o))}catch(v){E(v)}},l=o=>o.done?p(o.value):Promise.resolve(o.value).then(g,b);l((r=r.apply(n,e)).next())});const ln=n=>{const[e,r]=(0,t.useReducer)(Jr,Yr),p=(0,a.useNotification)(),E=(0,t.useRef)(null);(0,t.useEffect)(()=>(E.current=!0,n?g(n):r({type:"GET_DATA_SUCCEEDED",role:{}}),()=>E.current=!1),[n]);const g=l=>on(void 0,null,function*(){try{const{data:{role:o}}=yield Ae.Z.get(`/${m.Z}/roles/${l}`);E.current&&r({type:"GET_DATA_SUCCEEDED",role:o})}catch(o){qr.error(o),r({type:"GET_DATA_ERROR"}),p({type:"warning",message:{id:"notification.error"}})}}),b=(0,t.useCallback)(l=>{r(dt({type:"ON_SUBMIT_SUCCEEDED"},l))},[]);return an(dt({},e),{onSubmitSucceeded:b})};var le=s(53209);const cn=le.Ry().shape({name:le.Z_().required(a.translatedErrors.required),description:le.Z_().required(a.translatedErrors.required)});var dn=s(25108),un=Object.defineProperty,pn=Object.defineProperties,mn=Object.getOwnPropertyDescriptors,ut=Object.getOwnPropertySymbols,gn=Object.prototype.hasOwnProperty,fn=Object.prototype.propertyIsEnumerable,pt=(n,e,r)=>e in n?un(n,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):n[e]=r,mt=(n,e)=>{for(var r in e||(e={}))gn.call(e,r)&&pt(n,r,e[r]);if(ut)for(var r of ut(e))fn.call(e,r)&&pt(n,r,e[r]);return n},vn=(n,e)=>pn(n,mn(e)),En=(n,e,r)=>new Promise((p,E)=>{var g=o=>{try{l(r.next(o))}catch(v){E(v)}},b=o=>{try{l(r.throw(o))}catch(v){E(v)}},l=o=>o.done?p(o.value):Promise.resolve(o.value).then(g,b);l((r=r.apply(n,e)).next())});const Pn=()=>{const{formatMessage:n}=(0,$.useIntl)(),[e,r]=(0,t.useState)(!1),p=(0,a.useNotification)(),{lockApp:E,unlockApp:g}=(0,a.useOverlayBlocker)(),{params:{id:b}}=(0,c.useRouteMatch)(`/settings/${m.Z}/roles/:id`),{isLoading:l,routes:o}=it(),{role:v,onSubmitSucceeded:I,isLoading:N}=ln(b),w=(0,t.useRef)(),z=K=>En(void 0,null,function*(){E(),r(!0);try{const X=w.current.getPermissions();yield Ae.Z.put(`/${m.Z}/roles/${b}`,vn(mt(mt({},K),X),{users:[]})),I({name:K.name,description:K.description}),p({type:"success",message:{id:(0,ie.Z)("Settings.roles.edited"),defaultMessage:"Role edited"}})}catch(X){dn.error(X),p({type:"warning",message:{id:"notification.error",defaultMessage:"An error occurred"}})}r(!1),g()});return N?t.createElement(a.LoadingIndicatorPage,null):t.createElement(C.o,null,t.createElement(a.SettingsPageTitle,{name:"Roles"}),t.createElement(ye.Formik,{enableReinitialize:!0,initialValues:{name:v.name,description:v.description},onSubmit:z,validationSchema:cn},({handleSubmit:K,values:X,handleChange:Y,errors:ce})=>t.createElement(a.Form,{noValidate:!0,onSubmit:K},t.createElement(L.T,{primaryAction:!l&&t.createElement(O.z,{disabled:v.code==="strapi-super-admin",type:"submit",loading:e,startIcon:t.createElement(we.Z,null)},n({id:"global.save",defaultMessage:"Save"})),title:v.name,subtitle:v.description,navigationAction:t.createElement(a.Link,{startIcon:t.createElement(Oe.Z,null),to:"/settings/users-permissions/roles"},n({id:"global.back",defaultMessage:"Back"}))}),t.createElement(P.D,null,t.createElement(H.K,{spacing:7},t.createElement(Q.x,{background:"neutral0",hasRadius:!0,shadow:"filterShadow",paddingTop:6,paddingBottom:6,paddingLeft:7,paddingRight:7},t.createElement(H.K,{spacing:4},t.createElement(M.Z,{variant:"delta",as:"h2"},n({id:(0,ie.Z)("EditPage.form.roles"),defaultMessage:"Role details"})),t.createElement(be.r,{gap:4},t.createElement(se.P,{col:6},t.createElement(he.o,{name:"name",value:X.name||"",onChange:Y,label:n({id:"global.name",defaultMessage:"Name"}),error:ce.name?n({id:ce.name,defaultMessage:"Invalid value"}):null})),t.createElement(se.P,{col:6},t.createElement(me.g,{name:"description",value:X.description||"",onChange:Y,label:n({id:"global.description",defaultMessage:"Description"}),error:ce.description?n({id:ce.description,defaultMessage:"Invalid value"}):null}))))),!l&&t.createElement(et,{ref:w,permissions:v.permissions,routes:o}))))))},yn=()=>t.createElement(a.CheckPagePermissions,{permissions:f.Z.updateRole},t.createElement(Pn,null)),hn=le.Ry().shape({name:le.Z_().required(a.translatedErrors.required),description:le.Z_().required(a.translatedErrors.required)});var On=s(25108),bn=Object.defineProperty,Rn=Object.defineProperties,Cn=Object.getOwnPropertyDescriptors,gt=Object.getOwnPropertySymbols,An=Object.prototype.hasOwnProperty,Dn=Object.prototype.propertyIsEnumerable,ft=(n,e,r)=>e in n?bn(n,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):n[e]=r,vt=(n,e)=>{for(var r in e||(e={}))An.call(e,r)&&ft(n,r,e[r]);if(gt)for(var r of gt(e))Dn.call(e,r)&&ft(n,r,e[r]);return n},Tn=(n,e)=>Rn(n,Cn(e)),xn=(n,e,r)=>new Promise((p,E)=>{var g=o=>{try{l(r.next(o))}catch(v){E(v)}},b=o=>{try{l(r.throw(o))}catch(v){E(v)}},l=o=>o.done?p(o.value):Promise.resolve(o.value).then(g,b);l((r=r.apply(n,e)).next())});const Ln=()=>{const{formatMessage:n}=(0,$.useIntl)(),[e,r]=(0,t.useState)(!1),p=(0,a.useNotification)(),{goBack:E}=(0,c.useHistory)(),{lockApp:g,unlockApp:b}=(0,a.useOverlayBlocker)(),{isLoading:l,permissions:o,routes:v}=it(),{trackUsage:I}=(0,a.useTracking)(),N=(0,t.useRef)(),w=z=>xn(void 0,null,function*(){g(),r(!0);try{const K=N.current.getPermissions();yield Ae.Z.post(`/${m.Z}/roles`,Tn(vt(vt({},z),K),{users:[]})),I("didCreateRole"),p({type:"success",message:{id:(0,ie.Z)("Settings.roles.created"),defaultMessage:"Role created"}}),E()}catch(K){On.error(K),p({type:"warning",message:{id:"notification.error",defaultMessage:"An error occurred"}})}r(!1),b()});return t.createElement(C.o,null,t.createElement(a.SettingsPageTitle,{name:"Roles"}),t.createElement(ye.Formik,{enableReinitialize:!0,initialValues:{name:"",description:""},onSubmit:w,validationSchema:hn},({handleSubmit:z,values:K,handleChange:X,errors:Y})=>t.createElement(a.Form,{noValidate:!0,onSubmit:z},t.createElement(L.T,{primaryAction:!l&&t.createElement(O.z,{type:"submit",loading:e,startIcon:t.createElement(we.Z,null)},n({id:"global.save",defaultMessage:"Save"})),title:n({id:"Settings.roles.create.title",defaultMessage:"Create a role"}),subtitle:n({id:"Settings.roles.create.description",defaultMessage:"Define the rights given to the role"})}),t.createElement(P.D,null,t.createElement(H.K,{spacing:7},t.createElement(Q.x,{background:"neutral0",hasRadius:!0,shadow:"filterShadow",paddingTop:6,paddingBottom:6,paddingLeft:7,paddingRight:7},t.createElement(H.K,{spacing:4},t.createElement(M.Z,{variant:"delta",as:"h2"},n({id:(0,ie.Z)("EditPage.form.roles"),defaultMessage:"Role details"})),t.createElement(be.r,{gap:4},t.createElement(se.P,{col:6},t.createElement(he.o,{name:"name",value:K.name||"",onChange:X,label:n({id:"global.name",defaultMessage:"Name"}),error:Y.name?n({id:Y.name,defaultMessage:"Invalid value"}):null})),t.createElement(se.P,{col:6},t.createElement(me.g,{name:"description",value:K.description||"",onChange:X,label:n({id:"global.description",defaultMessage:"Description"}),error:Y.description?n({id:Y.description,defaultMessage:"Invalid value"}):null}))))),!l&&t.createElement(et,{ref:N,permissions:o,routes:v}))))))},Mn=()=>t.createElement(a.CheckPagePermissions,{permissions:f.Z.createRole},t.createElement(Ln,null)),wn=()=>t.createElement(a.CheckPagePermissions,{permissions:f.Z.accessRoles},t.createElement(c.Switch,null,t.createElement(c.Route,{path:`/settings/${m.Z}/roles/new`,component:Mn,exact:!0}),t.createElement(c.Route,{path:`/settings/${m.Z}/roles/:id`,component:yn,exact:!0}),t.createElement(c.Route,{path:`/settings/${m.Z}/roles`,component:De,exact:!0}),t.createElement(c.Route,{path:"",component:a.NotFound})))},46979:(B,S,s)=>{"use strict";s.d(S,{Z:()=>L});var t=s(9669),c=s.n(t),a=s(68547),m=s.n(a),f=(d,P,C)=>new Promise((j,u)=>{var h=M=>{try{D(C.next(M))}catch(Z){u(Z)}},y=M=>{try{D(C.throw(M))}catch(Z){u(Z)}},D=M=>M.done?j(M.value):Promise.resolve(M.value).then(h,y);D((C=C.apply(d,P)).next())});const O=c().create({baseURL:""});O.interceptors.request.use(d=>f(void 0,null,function*(){return d.headers={Authorization:`Bearer ${a.auth.getToken()}`,Accept:"application/json","Content-Type":"application/json"},d}),d=>{Promise.reject(d)}),O.interceptors.response.use(d=>d,d=>{var P;throw((P=d.response)==null?void 0:P.status)===401&&(a.auth.clearAppStorage(),window.location.reload()),d});const L=(0,a.wrapAxiosInstance)(O)},89031:(B,S,s)=>{"use strict";s.d(S,{be:()=>t.Z,YX:()=>m,Gc:()=>A,OB:()=>L.Z});var t=s(46979),c=s(96486);const m=d=>Object.keys(d).reduce((P,C)=>{const j=d[C].controllers,u=Object.keys(j).reduce((h,y)=>((0,c.isEmpty)(j[y])||(h[y]=j[y]),h),{});return(0,c.isEmpty)(u)||(P[C]={controllers:u}),P},{});var f=s(31498);const A=d=>`/${f.Z}/${d}`;var L=s(84757)},89881:(B,S,s)=>{var t=s(47816),c=s(99291),a=c(t);B.exports=a},69199:(B,S,s)=>{var t=s(89881),c=s(98612);function a(m,f){var O=-1,A=c(m)?Array(m.length):[];return t(m,function(L,d,P){A[++O]=f(L,d,P)}),A}B.exports=a},82689:(B,S,s)=>{var t=s(29932),c=s(97786),a=s(67206),m=s(69199),f=s(71131),O=s(7518),A=s(85022),L=s(6557),d=s(1469);function P(C,j,u){j.length?j=t(j,function(D){return d(D)?function(M){return c(M,D.length===1?D[0]:D)}:D}):j=[L];var h=-1;j=t(j,O(a));var y=m(C,function(D,M,Z){var V=t(j,function($){return $(D)});return{criteria:V,index:++h,value:D}});return f(y,function(D,M){return A(D,M,u)})}B.exports=P},71131:B=>{function S(s,t){var c=s.length;for(s.sort(t);c--;)s[c]=s[c].value;return s}B.exports=S},26393:(B,S,s)=>{var t=s(33448);function c(a,m){if(a!==m){var f=a!==void 0,O=a===null,A=a===a,L=t(a),d=m!==void 0,P=m===null,C=m===m,j=t(m);if(!P&&!j&&!L&&a>m||L&&d&&C&&!P&&!j||O&&d&&C||!f&&C||!A)return 1;if(!O&&!L&&!j&&a<m||j&&f&&A&&!O&&!L||P&&f&&A||!d&&A||!C)return-1}return 0}B.exports=c},85022:(B,S,s)=>{var t=s(26393);function c(a,m,f){for(var O=-1,A=a.criteria,L=m.criteria,d=A.length,P=f.length;++O<d;){var C=t(A[O],L[O]);if(C){if(O>=P)return C;var j=f[O];return C*(j=="desc"?-1:1)}}return a.index-m.index}B.exports=c},99291:(B,S,s)=>{var t=s(98612);function c(a,m){return function(f,O){if(f==null)return f;if(!t(f))return a(f,O);for(var A=f.length,L=m?A:-1,d=Object(f);(m?L--:++L<A)&&O(d[L],L,d)!==!1;);return f}}B.exports=c},35161:(B,S,s)=>{var t=s(29932),c=s(67206),a=s(69199),m=s(1469);function f(O,A){var L=m(O)?t:a;return L(O,c(A,3))}B.exports=f},89734:(B,S,s)=>{var t=s(21078),c=s(82689),a=s(5976),m=s(16612),f=a(function(O,A){if(O==null)return[];var L=A.length;return L>1&&m(O,A[0],A[1])?A=[]:L>2&&m(A[0],A[1],A[2])&&(A=[A[0]]),c(O,t(A,1),[])});B.exports=f},13217:(B,S,s)=>{var t=s(14259);function c(a){var m=a==null?0:a.length;return m?t(a,1,m):[]}B.exports=c},48734:(B,S,s)=>{"use strict";s.d(S,{U:()=>j,y:()=>P});var t=s(67294),c=s(45697),a=s(71893),m=s(72735),f=s(13819),O=s(41762),A=s(35961),L=s(46273);const d=({theme:u,expanded:h,variant:y,disabled:D,error:M})=>M?`1px solid ${u.colors.danger600} !important`:D?`1px solid ${u.colors.neutral150}`:h?`1px solid ${u.colors.primary600}`:y==="primary"?`1px solid ${u.colors.neutral0}`:`1px solid ${u.colors.neutral100}`,P=(0,a.default)(m.Z)``,C=(0,a.default)(A.x)`
  border: ${d};

  &:hover:not([aria-disabled='true']) {
    border: 1px solid ${({theme:u})=>u.colors.primary600};

    ${P} {
      color: ${({theme:u,expanded:h})=>h?void 0:u.colors.primary700};
    }

    ${m.Z} {
      color: ${({theme:u,expanded:h})=>h?void 0:u.colors.primary600};
    }

    & > ${L.k} {
      background: ${({theme:u})=>u.colors.primary100};
    }

    [data-strapi-dropdown='true'] {
      background: ${({theme:u})=>u.colors.primary200};
    }
  }
`,j=({children:u,expanded:h,id:y,size:D,variant:M,disabled:Z,error:V,hasErrorMessage:$,onToggle:k,toggle:te})=>{const _=(0,O.M)("accordion",y);return t.createElement(f.S.Provider,{value:{expanded:h,onToggle:k,toggle:te,id:_,size:D,variant:M,disabled:Z}},t.createElement(C,{"data-strapi-expanded":h,disabled:Z,"aria-disabled":Z,expanded:h,hasRadius:!0,variant:M,error:V},u),V&&$&&t.createElement(A.x,{paddingTop:1},t.createElement(m.Z,{variant:"pi",textColor:"danger600"},V)))};j.defaultProps={disabled:!1,error:void 0,expanded:!1,hasErrorMessage:!0,id:void 0,toggle:void 0,size:"M",variant:"primary",onToggle:void 0},j.propTypes={children:c.node.isRequired,disabled:c.bool,error:c.string,expanded:c.bool,hasErrorMessage:c.bool,id:c.string,onToggle:c.func,size:c.oneOf(["S","M"]),toggle:c.func,variant:c.oneOf(["primary","secondary"])}},63081:(B,S,s)=>{"use strict";s.d(S,{v:()=>j});var t=s(67294),c=s(45697),a=s(13819),m=s(35961),f=Object.defineProperty,O=Object.getOwnPropertySymbols,A=Object.prototype.hasOwnProperty,L=Object.prototype.propertyIsEnumerable,d=(u,h,y)=>h in u?f(u,h,{enumerable:!0,configurable:!0,writable:!0,value:y}):u[h]=y,P=(u,h)=>{for(var y in h||(h={}))A.call(h,y)&&d(u,y,h[y]);if(O)for(var y of O(h))L.call(h,y)&&d(u,y,h[y]);return u},C=(u,h)=>{var y={};for(var D in u)A.call(u,D)&&h.indexOf(D)<0&&(y[D]=u[D]);if(u!=null&&O)for(var D of O(u))h.indexOf(D)<0&&L.call(u,D)&&(y[D]=u[D]);return y};const j=u=>{var h=u,{children:y}=h,D=C(h,["children"]);const{expanded:M,id:Z}=(0,a.A)();if(!M)return null;const V=`accordion-content-${Z}`,$=`accordion-label-${Z}`,k=`accordion-desc-${Z}`;return t.createElement(m.x,P({role:"region",id:V,"aria-labelledby":$,"aria-describedby":k},D),y)};j.propTypes={children:c.node.isRequired}},13819:(B,S,s)=>{"use strict";s.d(S,{A:()=>a,S:()=>c});var t=s(67294);const c=(0,t.createContext)(),a=()=>(0,t.useContext)(c)},74756:(B,S,s)=>{"use strict";s.d(S,{B:()=>_});var t=s(67294),c=s(45697),a=s(12645),m=s(71893),f=s(39785),O=s(72735),A=s(48734),L=s(13819),d=s(46273),P=s(7681),C=s(52624);const j=({expanded:i,disabled:R,variant:T})=>{let x;return i?x="primary100":R?x="neutral150":T==="primary"?x="neutral0":x="neutral100",x};var u=s(25108),h=Object.defineProperty,y=Object.getOwnPropertySymbols,D=Object.prototype.hasOwnProperty,M=Object.prototype.propertyIsEnumerable,Z=(i,R,T)=>R in i?h(i,R,{enumerable:!0,configurable:!0,writable:!0,value:T}):i[R]=T,V=(i,R)=>{for(var T in R||(R={}))D.call(R,T)&&Z(i,T,R[T]);if(y)for(var T of y(R))M.call(R,T)&&Z(i,T,R[T]);return i},$=(i,R)=>{var T={};for(var x in i)D.call(i,x)&&R.indexOf(x)<0&&(T[x]=i[x]);if(i!=null&&y)for(var x of y(i))R.indexOf(x)<0&&M.call(i,x)&&(T[x]=i[x]);return T};const k=(0,m.default)(f.A)`
  text-align: left;

  // necessary to make the ellipsis prop work on the title
  > span {
    max-width: 100%;
  }

  svg {
    width: ${14/16}rem;
    height: ${14/16}rem;

    path {
      fill: ${({theme:i,expanded:R})=>R?i.colors.primary600:i.colors.neutral500};
    }
  }
`,te=(0,m.default)(d.k)`
  min-height: ${({theme:i,size:R})=>i.sizes.accordions[R]};
  border-radius: ${({theme:i,expanded:R})=>R?`${i.borderRadius} ${i.borderRadius} 0 0`:i.borderRadius};

  &:hover {
    svg {
      path {
        fill: ${({theme:i})=>i.colors.primary600};
      }
    }
  }
`,_=i=>{var R=i,{title:T,description:x,as:U,togglePosition:F,action:G}=R,ae=$(R,["title","description","as","togglePosition","action"]);const re=(0,t.useRef)(null),{onToggle:oe,toggle:ne,expanded:W,id:de,size:q,variant:fe,disabled:ee}=(0,L.A)(),ue=`accordion-content-${de}`,ve=`accordion-label-${de}`,Ee=`accordion-desc-${de}`,pe=q==="M"?6:4,Pe=q==="M"?pe:pe-2,Me=j({expanded:W,disabled:ee,variant:fe}),De={as:U,fontWeight:q==="S"?"bold":void 0,id:ve,textColor:W?"primary600":"neutral700",ellipsis:!0,variant:q==="M"?"delta":void 0},ye=W?"primary600":"neutral600",H=W?"primary200":"neutral200",Q=q==="M"?`${32/16}rem`:`${24/16}rem`,he=()=>{ee||(ne&&!oe?(u.warn('Deprecation warning: Usage of "toggle" prop in Accordion component is deprecated. This is discouraged and will be removed in the next major release. Please use "onToggle" instead'),ne()):oe())},me=t.createElement(d.k,{justifyContent:"center",borderRadius:"50%",height:Q,width:Q,transform:W?"rotate(180deg)":void 0,"data-strapi-dropdown":!0,disabled:ee,"aria-hidden":!0,as:"span",background:H,cursor:ee?"not-allowed":"pointer",onClick:()=>{var Oe;return(Oe=re==null?void 0:re.current)==null?void 0:Oe.click()},shrink:0},t.createElement(C.J,{as:a.default,width:q==="M"?`${11/16}rem`:`${8/16}rem`,color:W?"primary600":"neutral600"}));return t.createElement(te,{paddingBottom:Pe,paddingLeft:pe,paddingRight:pe,paddingTop:Pe,background:Me,expanded:W,size:q,justifyContent:"space-between",cursor:ee?"not-allowed":""},t.createElement(P.K,{horizontal:!0,spacing:3,flex:1,maxWidth:"100%"},F==="left"&&me,t.createElement(k,V({ref:re,onClick:he,"aria-disabled":ee,"aria-expanded":W,"aria-controls":ue,"aria-labelledby":ve,"data-strapi-accordion-toggle":!0,expanded:W,type:"button",flex:1,minWidth:0},ae),t.createElement(t.Fragment,null,t.createElement(A.y,V({},De),T),x&&t.createElement(O.Z,{as:"p",id:Ee,textColor:ye},x))),F==="right"&&t.createElement(P.K,{horizontal:!0,spacing:3},me,G),F==="left"&&G))};_.defaultProps={action:void 0,as:"span",description:void 0,variant:"primary",togglePosition:"right"},_.propTypes={action:c.node,as:c.string,description:c.string,title:c.string.isRequired,togglePosition:c.oneOf(["right","left"]),variant:c.oneOf(["primary","secondary"])}},36989:(B,S,s)=>{"use strict";s.d(S,{Z:()=>L});var t=s(67294),c=s(45697),a=s(71893),m=s(35961),f=s(46273);const O=(0,a.default)(f.k)`
  & > * + * {
    margin-left: ${({theme:d})=>d.spaces[2]};
  }

  margin-left: ${({pullRight:d})=>d?"auto":void 0};
`,A=(0,a.default)(O)`
  flex-shrink: 0;
`,L=({startActions:d,endActions:P})=>d||P?t.createElement(m.x,{paddingLeft:10,paddingRight:10},t.createElement(m.x,{paddingBottom:4},t.createElement(f.k,{justifyContent:"space-between",alignItems:"flex-start"},d&&t.createElement(O,{wrap:"wrap"},d),P&&t.createElement(A,{pullRight:!0},P)))):null;L.defaultProps={endActions:void 0,startActions:void 0},L.propTypes={endActions:c.node,startActions:c.node}},49066:(B,S,s)=>{"use strict";s.d(S,{D:()=>m});var t=s(67294),c=s(45697),a=s(35961);const m=({children:f})=>t.createElement(a.x,{paddingLeft:10,paddingRight:10},f);m.propTypes={children:c.node.isRequired}},67838:(B,S,s)=>{"use strict";s.d(S,{T:()=>k});var t=s(67294),c=s(71893),a=s(45697),m=s(72735),f=s(35961),O=s(46273);const A=i=>{const R=(0,t.useRef)(null),[T,x]=(0,t.useState)(!0),U=([F])=>{x(F.isIntersecting)};return(0,t.useEffect)(()=>{const F=R.current,G=new IntersectionObserver(U,i);return F&&G.observe(R.current),()=>{F&&G.disconnect()}},[R,i]),[R,T]};var L=s(98402);const d=(i,R)=>{const T=(0,L.useCallbackRef)(R);(0,t.useLayoutEffect)(()=>{const x=new ResizeObserver(T);return Array.isArray(i)?i.forEach(U=>{U.current&&x.observe(U.current)}):i.current&&x.observe(i.current),()=>{x.disconnect()}},[i,T])};var P=Object.defineProperty,C=Object.defineProperties,j=Object.getOwnPropertyDescriptors,u=Object.getOwnPropertySymbols,h=Object.prototype.hasOwnProperty,y=Object.prototype.propertyIsEnumerable,D=(i,R,T)=>R in i?P(i,R,{enumerable:!0,configurable:!0,writable:!0,value:T}):i[R]=T,M=(i,R)=>{for(var T in R||(R={}))h.call(R,T)&&D(i,T,R[T]);if(u)for(var T of u(R))y.call(R,T)&&D(i,T,R[T]);return i},Z=(i,R)=>C(i,j(R)),V=(i,R)=>{var T={};for(var x in i)h.call(i,x)&&R.indexOf(x)<0&&(T[x]=i[x]);if(i!=null&&u)for(var x of u(i))R.indexOf(x)<0&&y.call(i,x)&&(T[x]=i[x]);return T};const $=()=>{const i=(0,t.useRef)(null),[R,T]=(0,t.useState)(null),[x,U]=A({root:null,rootMargin:"0px",threshold:0});return d(x,()=>{x.current&&T(x.current.getBoundingClientRect())}),(0,t.useEffect)(()=>{i.current&&T(i.current.getBoundingClientRect())},[i]),{containerRef:x,isVisible:U,baseHeaderLayoutRef:i,headerSize:R}},k=i=>{const{containerRef:R,isVisible:T,baseHeaderLayoutRef:x,headerSize:U}=$();return t.createElement(t.Fragment,null,t.createElement("div",{style:{height:U==null?void 0:U.height},ref:R},T&&t.createElement(_,M({ref:x},i))),!T&&t.createElement(_,Z(M({},i),{sticky:!0,width:U==null?void 0:U.width})))};k.displayName="HeaderLayout";const te=(0,c.default)(f.x)`
  position: fixed;
  top: 0;
  right: 0;
  width: ${i=>i.width}px;
  z-index: 4;
  box-shadow: ${({theme:i})=>i.shadows.tableShadow};
`,_=t.forwardRef((i,R)=>{var T=i,{navigationAction:x,primaryAction:U,secondaryAction:F,subtitle:G,title:ae,sticky:re,width:oe}=T,ne=V(T,["navigationAction","primaryAction","secondaryAction","subtitle","title","sticky","width"]);const W=typeof G=="string";return re?t.createElement(te,{paddingLeft:6,paddingRight:6,paddingTop:3,paddingBottom:3,background:"neutral0",width:oe,"data-strapi-header-sticky":!0},t.createElement(O.k,{justifyContent:"space-between"},t.createElement(O.k,null,x&&t.createElement(f.x,{paddingRight:3},x),t.createElement(f.x,null,t.createElement(m.Z,M({variant:"beta",as:"h1"},ne),ae),W?t.createElement(m.Z,{variant:"pi",textColor:"neutral600"},G):G),F?t.createElement(f.x,{paddingLeft:4},F):null),t.createElement(O.k,null,U?t.createElement(f.x,{paddingLeft:2},U):void 0))):t.createElement(f.x,{ref:R,paddingLeft:10,paddingRight:10,paddingBottom:8,paddingTop:x?6:8,background:"neutral100","data-strapi-header":!0},x?t.createElement(f.x,{paddingBottom:2},x):null,t.createElement(O.k,{justifyContent:"space-between"},t.createElement(O.k,null,t.createElement(m.Z,M({as:"h1",variant:"alpha"},ne),ae),F?t.createElement(f.x,{paddingLeft:4},F):null),U),W?t.createElement(m.Z,{variant:"epsilon",textColor:"neutral600",as:"p"},G):G)});_.displayName="BaseHeaderLayout",_.defaultProps={navigationAction:void 0,primaryAction:void 0,secondaryAction:void 0,subtitle:void 0,sticky:!1,width:void 0},_.propTypes={navigationAction:a.node,primaryAction:a.node,secondaryAction:a.node,sticky:a.bool,subtitle:a.oneOfType([a.string,a.node]),title:a.string.isRequired,width:a.number},k.defaultProps={navigationAction:void 0,primaryAction:void 0,secondaryAction:void 0,subtitle:void 0},k.propTypes={navigationAction:a.node,primaryAction:a.node,secondaryAction:a.node,subtitle:a.oneOfType([a.string,a.node]),title:a.string.isRequired}},185:(B,S,s)=>{"use strict";s.d(S,{o:()=>j});var t=s(67294),c=s(45697),a=s(71893),m=Object.defineProperty,f=Object.getOwnPropertySymbols,O=Object.prototype.hasOwnProperty,A=Object.prototype.propertyIsEnumerable,L=(u,h,y)=>h in u?m(u,h,{enumerable:!0,configurable:!0,writable:!0,value:y}):u[h]=y,d=(u,h)=>{for(var y in h||(h={}))O.call(h,y)&&L(u,y,h[y]);if(f)for(var y of f(h))A.call(h,y)&&L(u,y,h[y]);return u},P=(u,h)=>{var y={};for(var D in u)O.call(u,D)&&h.indexOf(D)<0&&(y[D]=u[D]);if(u!=null&&f)for(var D of f(u))h.indexOf(D)<0&&A.call(u,D)&&(y[D]=u[D]);return y};const C=a.default.main`
  // To prevent global outline on focus visible to force an outline when Main is focused
  &:focus-visible {
    outline: none;
  }
`,j=u=>{var h=u,{labelledBy:y}=h,D=P(h,["labelledBy"]);const M=y||"main-content-title";return t.createElement(C,d({"aria-labelledby":M,id:"main-content",tabIndex:-1},D))};j.defaultProps={labelledBy:void 0},j.propTypes={labelledBy:c.string}},67109:(B,S,s)=>{"use strict";s.d(S,{Z:()=>L});var t=s(67294),c=Object.defineProperty,a=Object.getOwnPropertySymbols,m=Object.prototype.hasOwnProperty,f=Object.prototype.propertyIsEnumerable,O=(d,P,C)=>P in d?c(d,P,{enumerable:!0,configurable:!0,writable:!0,value:C}):d[P]=C,A=(d,P)=>{for(var C in P||(P={}))m.call(P,C)&&O(d,C,P[C]);if(a)for(var C of a(P))f.call(P,C)&&O(d,C,P[C]);return d};function L(d){return t.createElement("svg",A({width:"1em",height:"1em",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},d),t.createElement("path",{d:"M24 13.3a.2.2 0 01-.2.2H5.74l8.239 8.239a.2.2 0 010 .282L12.14 23.86a.2.2 0 01-.282 0L.14 12.14a.2.2 0 010-.282L11.86.14a.2.2 0 01.282 0L13.98 1.98a.2.2 0 010 .282L5.74 10.5H23.8c.11 0 .2.09.2.2v2.6z",fill:"#212134"}))}},78114:(B,S,s)=>{"use strict";s.d(S,{Z:()=>L});var t=s(67294),c=Object.defineProperty,a=Object.getOwnPropertySymbols,m=Object.prototype.hasOwnProperty,f=Object.prototype.propertyIsEnumerable,O=(d,P,C)=>P in d?c(d,P,{enumerable:!0,configurable:!0,writable:!0,value:C}):d[P]=C,A=(d,P)=>{for(var C in P||(P={}))m.call(P,C)&&O(d,C,P[C]);if(a)for(var C of a(P))f.call(P,C)&&O(d,C,P[C]);return d};function L(d){return t.createElement("svg",A({width:"1em",height:"1em",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},d),t.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M2.68 9.192c-.6.276-2.114 1.18-2.306 1.303a.792.792 0 00-.374.68v1.65a.797.797 0 00.384.687c.254.16 1.73 1.042 2.306 1.303l.744 1.8c-.24.634-.67 2.333-.72 2.554a.797.797 0 00.216.744l1.167 1.166a.801.801 0 00.744.216l.03-.008c.36-.092 1.946-.498 2.523-.712l1.8.744c.276.6 1.181 2.115 1.304 2.307a.805.805 0 00.679.374h1.649a.797.797 0 00.686-.384c.16-.254 1.042-1.73 1.303-2.306l1.8-.744c.634.24 2.333.67 2.554.72a.797.797 0 00.744-.216l1.166-1.167a.803.803 0 00.216-.744l-.008-.03c-.092-.36-.498-1.946-.712-2.523l.744-1.8c.6-.276 2.115-1.181 2.307-1.304a.804.804 0 00.374-.679v-1.649a.796.796 0 00-.382-.679c-.254-.16-1.73-1.041-2.306-1.303l-.744-1.8c.24-.634.67-2.333.72-2.554a.796.796 0 00-.216-.744l-1.166-1.173a.802.802 0 00-.744-.216l-.03.008c-.361.092-1.947.498-2.524.712l-1.8-.744c-.276-.6-1.18-2.115-1.303-2.307a.803.803 0 00-.68-.374h-1.65a.797.797 0 00-.68.382c-.16.254-1.041 1.73-1.303 2.306l-1.8.744c-.634-.24-2.333-.67-2.554-.72a.797.797 0 00-.744.216L2.921 4.094a.802.802 0 00-.216.744l.008.03c.092.361.498 1.947.712 2.524l-.744 1.8zM12 17a5 5 0 100-10 5 5 0 000 10z",fill:"#212134"}))}}}]);
